## Tmux config mostly from here: https://github.com/atelic/dotfiles/blob/mac-setup/home/.tmux.conf
# some more from here: https://www.hamvocke.com/blog/a-guide-to-customizing-your-tmux-conf/

## change prefix to Ctrl-a (like in gnu-screen)
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix


## shell
# set -g default-command bash
# set -g default-shell /usr/local/bin/bash


## start with window 1 (instead of 0)
set -g base-index 1

## start with pane 1
set -g pane-base-index 1


## screen mode
set -g default-terminal "xterm-256color"
# for italics enable in iTerm and run:
# $ tic -x xterm-256color-italic.terminfo
# $ tic -x tmux-256color.terminfo
set -as terminal-overrides ',xterm*:Tc:sitm=\E[3m'


## source config file
bind r source-file ~/.tmux.conf \; display '~/.tmux.conf sourced'

## history
set -g history-limit 4096

# don't rename windows automatically
set-option -g allow-rename off

# switch panes using Alt-arrow without prefix
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# use vi mode
setw -g mode-keys vi
set -g status-keys vi

# Enable mouse mode (tmux 2.1 and above)
set -g mouse on
#set-option -g mouse-select-pane on
#set-option -g mouse-select-window on
#set-window-option -g mode-mouse on

# tmux-zoom.sh
# bind C-z run "tmux-zoom.sh"

# easy-to-remember split pane commands
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# colon :
# bind : command-prompt


## moving between panes with vim movement keys
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R


## window status
#setw -g window-status-format " #F#I:#W#F "
#setw -g window-status-current-format " #F#I:#W#F "
# setw -g window-status-format "#[fg=magenta]#[bg=black] #I #[bg=cyan]#[fg=colour8] #W "
# setw -g window-status-current-format "#[bg=brightmagenta]#[fg=colour8] #I #[fg=colour8]#[bg=colour14] #W "
# setw -g window-status-current-bg colour0
# setw -g window-status-current-fg colour11
# setw -g window-status-current-attr dim
# setw -g window-status-bg green
# setw -g window-status-fg black
# setw -g window-status-attr reverse

## Info on left (I don't have a session display for now)
set -g status-left ''


## loud or quiet?
set-option -g visual-activity off
set-option -g visual-bell off
set-option -g visual-silence off
set-window-option -g monitor-activity off
set-option -g bell-action none

## some key-binding changes
bind x kill-pane
bind X next-layout
bind Z previous-layout

#urxvt tab like window switching (-n: no prior escape seq)
bind -n S-down new-window
bind -n S-left prev
bind -n S-right next
bind -n C-left swap-window -t -1
bind -n C-right swap-window -t +1


# https://github.com/sonph/dotfiles/blob/master/home/tmux.conf
# Colors for borders of current active pane.
set -g pane-active-border-style fg=blue,bg=blue
# --------------------
# Status Bar
# --------------------
set -g status on
set -g status-position top
set -g status-bg black
set -g status-fg white

# Refresh rate (in secs).
set -g status-interval 5

# Left portion of status bar.
set -g status-left \
    "#[fg=black,bg=brightred] ss #[fg=brightred,bg=black] ###S  #[fg=black,bg=brightyellow] hs #[fg=brightyellow,bg=black] @#h"
set -g status-left-length 50

# Right portion of status bar.
set -g status-right "#(bash $HOME/.ienv/tmux-status-right)"
set -g status-right-length 80

# Middle portion of status bar (window list).
# Attributes: bright/bold, dim, underscore, blink, reverse, hidden, italics
# Base index starts from 1 instead of 0.
set -g status-justify centre
set -g base-index 1
set -g window-status-separator "  "

set -g window-status-format " #I #[fg=white,bg=black] #W #F "
set -g window-status-style fg=black,bg=white

set -g window-status-bell-style fg=black,bg=brightred
set -g window-status-activity-style fg=black,bg=brightred

# Active window.
setw -g window-status-current-format \
    "#[fg=black,bg=brightblue] #I #[fg=brightblue,bg=black] #W #F "

#    #####
#    ### COLORSCHEME: gruvbox dark
#    ## https://github.com/egel/tmux-gruvbox
#    set-option -g status "on"
#
#    # default statusbar colors
#    set-option -g status-bg colour237 #bg1
#    set-option -g status-fg colour223 #fg1
#
#    # default window title colors
#    set-window-option -g window-status-bg colour214 #yellow
#    set-window-option -g window-status-fg colour237 #bg1
#
#    set-window-option -g window-status-activity-bg colour237 #bg1
#    set-window-option -g window-status-activity-fg colour248 #fg3
#
#    # active window title colors
#    set-window-option -g window-status-current-bg default
#    set-window-option -g window-status-current-fg colour237 #bg1
#
#    # pane border
#    set-option -g pane-active-border-fg colour250 #fg2
#    set-option -g pane-border-fg colour237 #bg1
#
#    # message infos
#    set-option -g message-bg colour239 #bg2
#    set-option -g message-fg colour223 #fg1
#
#    # writting commands inactive
#    set-option -g message-command-bg colour239 #fg3
#    set-option -g message-command-fg colour223 #bg1
#
#    # pane number display
#    set-option -g display-panes-active-colour colour250 #fg2
#    set-option -g display-panes-colour colour237 #bg1
#
#    # clock
#    set-window-option -g clock-mode-colour colour109 #blue
#
#    # bell
#    set-window-option -g window-status-bell-style fg=colour235,bg=colour167 #    #bg, red
#
#
#    ## Theme settings mixed with colors (unfortunately, but there is no #    cleaner way)
#    set-option -g status-attr "none"
#    set-option -g status-justify "left"
#    set-option -g status-left-attr "none"
#    set-option -g status-left-length "80"
#    set-option -g status-right-attr "none"
#    set-option -g status-right-length "80"
#    set-window-option -g window-status-activity-attr "none"
#    set-window-option -g window-status-attr "none"
#    set-window-option -g window-status-separator ""
#
#    set-option -g status-left "#[fg=colour248, bg=colour241] #S #    #[fg=colour241, bg=colour237, nobold, noitalics, nounderscore]"
#    set-option -g status-right "#[fg=colour239, bg=colour237, nobold, #    nounderscore, noitalics]#[fg=colour246,bg=colour239] %Y-%m-%d  %H:%M #    #[fg=colour248, bg=colour239, nobold, noitalics, nounderscore]#    #[fg=colour237, bg=colour248] #h "
#
#    set-window-option -g window-status-current-format "#[fg=colour239, #    bg=colour248, :nobold, noitalics, nounderscore]#[fg=colour239, #    bg=colour214] #I #[fg=colour239, bg=colour214, bold] #W #[fg=colour214, #    bg=colour237, nobold, noitalics, nounderscore]"
#    set-window-option -g window-status-format #    "#[fg=colour237,bg=colour239,noitalics]#[fg=colour223,bg=colour239] #I #    #[fg=colour223, bg=colour239] #W #[fg=colour239, bg=colour237, noitalics]#    "
#